import{r as s,S as g,j as e,E as f,P as b,T as a,F as y}from"./index-Bb-4CbBO.js";import{a as j}from"./axiosInstance-DO_LSVaF.js";import{F as v,I as S,S as k}from"./Select--jaTVg83.js";import{M as w}from"./MenuItem-C0B-Guq9.js";import{T as F}from"./TextField-CQedjQ3I.js";import{B as C}from"./dividerClasses-CVjPeZ5I.js";import"./isHostComponent-Cde4GNkD.js";const T=()=>{const t=s.useContext(g);if(!t)throw new Error("useSnackbar must be used within a SnackBarProvider");return t},U=t=>{const[h,o]=s.useState(null),[c,l]=s.useState(!1),[u,i]=s.useState(null),{showSnackbar:d}=T();return s.useEffect(()=>{(async()=>{try{l(!0);const r=await j.get(t);o(r==null?void 0:r.data),d("Data fetched successfully!","success")}catch(r){i(r.message||"Something went wrong"),d("Error in fetching data.","error")}finally{l(!1)}})()},[t]),{data:h,loading:c,error:u}},p=[{label:"Sonnets",value:"https://poetrydb.org/title,random/Sonnet;3"},{label:"Cat Facts",value:"https://meowfacts.herokuapp.com"},{label:"Country Details",value:"http://geodb-free-service.wirefreethought.com/v1/geo/countries/FR"},{label:"Memes",value:"https://api.imgflip.com/get_memes"},{label:"Posts",value:"https://jsonplaceholder.typicode.com/posts"}],M=()=>{const[t,h]=s.useState(p[0].value),[o,c]=s.useState(""),[l,u]=s.useState(t),{data:i,loading:d,error:m}=U(l),r=n=>{h(n.target.value),c("")},x=()=>{u(o||t)};return e.jsxs(f,{sx:{my:3,display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},children:[e.jsxs(b,{sx:{p:3,mb:3,backgroundColor:"#f5f5f5"},children:[e.jsx(a,{variant:"h4",gutterBottom:!0,children:"Fetch Page"}),e.jsxs(a,{variant:"h5",marginY:2,children:["Welcome to the Fetch Page! This page demonstrates how to use a custom React hook, ",e.jsx("strong",{children:"useFetch"}),", to perform HTTP requests and render the data dynamically."]}),e.jsxs(a,{variant:"body1",color:"text.primary",children:["The ",e.jsx("strong",{children:"useFetch"})," hook abstracts the logic for performing fetch requests. It takes a URL as input and returns data, loading state, and any errors encountered. This approach enhances code reusability and simplifies the process of fetching data in multiple components."]}),e.jsx(a,{variant:"body1",color:"text.primary",sx:{mt:2},children:"Users can either select from predefined endpoints or input a custom URL. The fetched response is rendered in a styled, scrollable container for easy viewing and debugging."}),e.jsxs(a,{variant:"body2",color:"text.secondary",sx:{mt:4},children:[e.jsx("strong",{children:"Why a custom hook?"}),e.jsx("br",{}),"Custom hooks like ",e.jsx("strong",{children:"useFetch"})," help encapsulate reusable logic, keeping component code clean and focused on rendering UI. This improves maintainability and reduces code duplication."]}),e.jsxs(a,{variant:"body2",color:"text.secondary",sx:{mt:2},children:[e.jsx("strong",{children:"State Management:"}),e.jsx("br",{}),"The page uses ",e.jsx("strong",{children:"React's useState"})," to manage the selected URL, custom input, and the final URL used for fetching. This dynamic state setup ensures flexibility in switching endpoints."]}),e.jsxs(a,{variant:"body2",color:"text.secondary",sx:{mt:2},children:[e.jsx("strong",{children:"Global Feedback:"}),e.jsx("br",{}),"We use a ",e.jsx("strong",{children:"Redux-managed Snackbar"})," to display global messages such as fetch errors or success notifications. This centralized approach ensures consistent and user-friendly feedback across the application."]})]}),e.jsxs(v,{sx:{mt:5,py:2,width:"350px"},children:[e.jsx(S,{id:"select-label",children:"Select an Endpoint"}),e.jsx(k,{label:"Select endpoint",labelId:"select-label",value:t,onChange:r,children:p.map(n=>e.jsx(w,{value:n.value,children:n.label},n.value))})]}),e.jsx(F,{sx:{mb:2,width:"350px"},label:"Or enter any URL",value:o,onChange:n=>c(n.target.value),placeholder:"https://..."}),e.jsx(C,{variant:"contained",onClick:x,sx:{mb:3},children:"Fetch Data"}),d?e.jsx(y,{}):m?e.jsx(a,{color:"error",variant:"body1",children:m}):i?e.jsx("pre",{style:{wordBreak:"break-word",textAlign:"left",width:"100%",maxHeight:"400px",overflowY:"auto",backgroundColor:"#333",color:"#fff",padding:"1rem"},children:JSON.stringify(i,null,2)}):e.jsx(a,{variant:"body1",children:"No data to display."})]})};export{M as default};
